<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.system.design.mapper.ManagerSystemNoticeMapper">

    <select id="send2AllUser" resultType="com.system.design.entity.vo.ManagerSystemNoticeVo">
        SELECT
        title,
        content,
        publish_time
        FROM
        t_manager_system_notice
        WHERE
        TIMESTAMP (publish_time) = #{time}
        AND system_notice_id IN (
        SELECT
        system_notice_id
        FROM
        t_user_system_notice
        WHERE
        state = 0
        AND recipient_id = 0
        )
    </select>
    <select id="send2User" resultType="com.system.design.entity.vo.ManagerSystemNoticeVo">
        SELECT
        title,
        content,
        publish_time
        FROM
        t_manager_system_notice
        WHERE
        type = #{type}
        AND
        TIMESTAMP (publish_time) = #{publish_time}
        AND
        system_notice_id = (
        SELECT
        system_notice_id
        FROM
        t_user_system_notice
        WHERE
        state = 0
        AND recipient_id = 2)
    </select>
</mapper>
